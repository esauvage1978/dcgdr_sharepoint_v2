{% extends 'backpack/layout.html.twig' %}



{% block page_content %}
    {% embed 'widgets/tree-widget.html.twig' %}
        {% block tree_body %}
            {{ include('backpack/_show/_item.html.twig') }}
        {% endblock %}
    {% endembed %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(function () {
            var to = false;
            $('#demo_q').keyup(function () {
                if(to) { clearTimeout(to); }
                to = setTimeout(function () {
                    var v = $('#demo_q').val();
                    $('#tree').jstree(true).search(v);
                }, 250);
            });
            $('#tree').jstree(
                {
                    'core':
                        {
                            'data': treedata
                        },
                    'plugins' : ["search" ]
                }
            ).on('changed.jstree', function (e, data) {
                if (data.node) {
                    document.location = data.node.a_attr.href;
                }
            })
        });
    </script>
{% endblock %}
